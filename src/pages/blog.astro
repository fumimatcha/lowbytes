---
import Base from "../layouts/Base.astro";
import SiteHeader from "../components/SiteHeader.astro";
import { getEntry } from "astro:content";

// ✅ Editá esta lista con las entradas que querés destacar
const featuredSlugs = [
  "arch",          // <- viene de src/content/blog/arch.md
  // "otra-entrada",
  // "tercera-entrada",
];

// Cargamos solo las que existan y ordenamos por fecha desc
const featured = (
  await Promise.all(
    featuredSlugs.map(async (slug) => {
      try { return await getEntry("blog", slug); }
      catch { return null; }
    }),
  )
).filter(Boolean).sort((a, b) => +b!.data.date - +a!.data.date);
---

<Base title="Blog" description="Últimas entradas y temas del blog">
  <SiteHeader />
  <main class="site-main">
    <section class="main-card">
      <h1>blog</h1>
      <p>
        acá se van a publicar entradas y tutoriales sobre varios temas.
        <br><br>
        los posts están organizados por tags y el menú de abajo funciona
        una especie de indice para ir checkeando los posts por temas especificos.
        <br>
        no sé si es la forma más optima de organizar estas cosas, pero fue lo que se me ocurrió, 
        ante cualquier sugerencia por favor referirse a la página de <a href="/contacto">contacto</a> XD un saludo!
        
        
    </section>
    <section class="main-card">
      <ul class="topic-links">
        <li><a href="/blog/archlinux/">arch linux</a></li>
        <li>linux en general</li>
        <li><a href="/blog/gaming/">jueguitos en linux</a></li>
        <li>cosas</li>
      </ul>
    </section>

    <section class="main-card">
      <h2>Últimas entradas</h2>
      {featured.length === 0 ? (
        <p>Todavía no seleccionaste entradas destacadas.</p>
      ) : (
        featured.map(({ slug, data }) => (
          <article class="card">
            <h3><a href={`/blog/${slug}`}>{data.title}</a></h3>
            {data.description && <p>{data.description}</p>}
            <small>
              {data.date.toLocaleDateString()} · {data.tags?.join(", ")}
            </small>
          </article>
        ))
      )}
    </section>

    
  </main>
</Base>
